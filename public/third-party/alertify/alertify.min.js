/*!
 * alertify
 * https://github.com/alertifyjs/alertify.js/
 * Copyright (c) 2009-2014 Stuart Knightley, David Duponchel, Franz Buchinger, António Afonso
 * Released under the MIT license
 * Modification instructions:
 * MetInfo modified based on version 1.0.12
Added the function of automatically triggering alertify events by clicking and initialized default parameters
 */
!function(){"use strict";function t(){var t={parent:document.body,version:"1.0.12",defaultOkLabel:"Ok",okLabel:"Ok",defaultCancelLabel:"Cancel",cancelLabel:"Cancel",defaultMaxLogItems:2,maxLogItems:2,promptValue:"",promptPlaceholder:"",closeLogOnClick:!1,closeLogOnClickDefault:!1,delay:2e3,defaultDelay:2e3,logContainerClass:"alertify-logs right",logContainerDefaultClass:"alertify-logs right",dialogs:{buttons:{holder:"<nav>{{buttons}}</nav>",ok:"<button class='ok' tabindex='1'>{{ok}}</button>",cancel:"<button class='cancel' tabindex='2'>{{cancel}}</button>"},input:"<input type='text'>",message:"<div class='msg'>{{message}}</div>",log:"<div class='{{class}}'>{{message}}</div>"},defaultDialogs:{buttons:{holder:"<nav>{{buttons}}</nav>",ok:"<button class='ok' tabindex='1'>{{ok}}</button>",cancel:"<button class='cancel' tabindex='2'>{{cancel}}</button>"},input:"<input type='text'>",message:"<div class='msg'>{{message}}</div>",log:"<div class='{{class}}'>{{message}}</div>"},build:function(t){var e=this.dialogs.buttons.ok,n="<div class='dialog "+t.type+"'><div class=\"cover\">"+(this.head_title?'<div class="d-flex align-items-center bg-grey-100 font-size-18 position-relative cover" style="margin: -12px -12px 10px;padding-top:12px;padding-bottom:12px;padding-left:20px;">'+(this.head_icon?'<i class="'+this.head_icon+' text-muted h4 my-0 mr-2"></i>':"")+"<span>"+this.head_title+'</span><button type="button" class="close cancel"><span class="position-relative" style="top:-2px;">×</span></button></div>':"")+this.dialogs.message.replace("{{message}}",t.message);this.head_title='';this.head_icon='';setTimeout(()=>{this.hidenav='';},0);return"confirm"!==t.type&&"prompt"!==t.type||(e=this.dialogs.buttons.cancel+this.dialogs.buttons.ok),"prompt"===t.type&&(n+=this.dialogs.input),(n+(this.hidenav?'':this.dialogs.buttons.holder)+"</div></div>").replace("{{buttons}}",e).replace("{{ok}}",this.okLabel).replace("{{cancel}}",this.cancelLabel)},setCloseLogOnClick:function(t){this.closeLogOnClick=!!t},close:function(t,e){this.closeLogOnClick&&t.addEventListener("click",function(){n(t)}),e=e&&!isNaN(+e)?+e:this.delay,0>e?n(t):e>0&&setTimeout(function(){n(t)},e)},dialog:function(t,e,n,o){return this.setup({type:e,message:t,onOkay:n,onCancel:o})},log:function(t,e,n){var o=document.querySelectorAll(".alertify-logs > div");if(o){var s=o.length-this.maxLogItems;if(s>=0)for(var i=0,a=s+1;a>i;i++)this.close(o[i],-1)}t+='<button type="button" class="close"><span class="position-relative" style="top:-2px;">×</span></button>',this.notify(t,e,n)},setLogPosition:function(t){this.logContainerClass="alertify-logs "+t},setupLogContainer:function(t){this.setLogPosition($.inArray(t,["log","success","error"])>=0?"center":this.logContainerClass),this.delay="error"==t?9999e3:3e3;var e=document.querySelector(".alertify-logs"),n=this.logContainerClass;return e||(e=document.createElement("div"),e.className=n,this.parent.appendChild(e)),e.className!==n&&(e.className=n),e},notify:function(e,n,o){var s=this.setupLogContainer(n),i=document.createElement("div");i.className=n||"default",t.logTemplateMethod?i.innerHTML=t.logTemplateMethod(e):i.innerHTML=e,"function"==typeof o&&i.addEventListener("click",o),s.appendChild(i),setTimeout(function(){i.className+=" show"},10),this.close(i,this.delay),"error"==n&&(!$(".alertify-bg").length&&$("body").append('<div class="alertify-bg position-fixed h-100 w-100 bg-dark"></div>'),setTimeout(function(){$(".alertify-bg").fadeIn(100)},0))},setup:function(t){function e(e){if("function"!=typeof e&&(e=function(){}),i&&i.addEventListener("click",function(s){t.onOkay&&"function"==typeof t.onOkay&&(l?t.onOkay(l.value,s):t.onOkay(s)),e(l?{buttonClicked:"ok",inputValue:l.value,event:s}:{buttonClicked:"ok",event:s}),n(o)}),a&&a.length)for(var s=0;s<a.length;s++)a[s].addEventListener("click",function(s){t.onCancel&&"function"==typeof t.onCancel&&t.onCancel(s),e({buttonClicked:"cancel",event:s}),n(o)});l&&l.addEventListener("keyup",function(t){13===t.which&&i.click()})}var o=document.createElement("div");o.className="alertify hide",o.innerHTML=this.build(t);var s,i=o.querySelector(".ok"),a=o.getElementsByClassName("cancel"),l=o.querySelector("input"),c=o.querySelector("label");return l&&("string"==typeof this.promptPlaceholder&&(c?c.textContent=this.promptPlaceholder:l.placeholder=this.promptPlaceholder),"string"==typeof this.promptValue&&(l.value=this.promptValue)),"function"==typeof Promise?s=new Promise(e):e(),this.parent.appendChild(o),setTimeout(function(){o.classList.remove("hide"),l&&t.type&&"prompt"===t.type?(l.select(),l.focus()):1/* i&&i.focus() */},100),s},okBtn:function(t){return this.okLabel=t,this},setDelay:function(t){return t=t||0,this.delay=isNaN(t)?this.defaultDelay:parseInt(t,10),this},cancelBtn:function(t){return this.cancelLabel=t,this},setMaxLogItems:function(t){this.maxLogItems=parseInt(t||this.defaultMaxLogItems)},theme:function(t){switch(t.toLowerCase()){case"bootstrap":this.dialogs.buttons.ok="<button class='ok btn btn-primary' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel btn btn-light' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<input type='text' class='form-control'>";break;case"purecss":this.dialogs.buttons.ok="<button class='ok pure-button' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel pure-button' tabindex='2'>{{cancel}}</button>";break;case"mdl":case"material-design-light":this.dialogs.buttons.ok="<button class='ok mdl-button mdl-js-button mdl-js-ripple-effect'  tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel mdl-button mdl-js-button mdl-js-ripple-effect' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<div class='mdl-textfield mdl-js-textfield'><input class='mdl-textfield__input'><label class='md-textfield__label'></label></div>";break;case"angular-material":this.dialogs.buttons.ok="<button class='ok md-primary md-button' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel md-button' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<div layout='column'><md-input-container md-no-float><input type='text'></md-input-container></div>";break;case"default":default:this.dialogs.buttons.ok=this.defaultDialogs.buttons.ok,this.dialogs.buttons.cancel=this.defaultDialogs.buttons.cancel,this.dialogs.input=this.defaultDialogs.input}},reset:function(){this.parent=document.body,this.theme("default"),this.okBtn(this.defaultOkLabel),this.cancelBtn(this.defaultCancelLabel),this.setMaxLogItems(),this.promptValue="",this.promptPlaceholder="",this.delay=this.defaultDelay,this.setCloseLogOnClick(this.closeLogOnClickDefault),this.setLogPosition("bottom left"),this.logTemplateMethod=null}};return t.theme("bootstrap"),{_$$alertify:t,parent:function(e){t.parent=e},reset:function(){return t.reset(),this},alert:function(e,n,o,type){type=='tips' && (e=`<span class="text-danger">${e}</span>`,alertify.addHead('','','tips'));return t.dialog(e,"alert",n,o)||this},confirm:function(e,n,o){return t.dialog(e,"confirm",n,o)||this},prompt:function(e,n,o){return t.dialog(e,"prompt",n,o)||this},log:function(e,n){return t.log(e,"default",n),this},theme:function(e){return t.theme(e),this},success:function(e,n){return t.log(e,"success",n),this},error:function(e,n){return t.log(e,"error",n),this},cancelBtn:function(e){return t.cancelBtn(e),this},okBtn:function(e){return t.okBtn(e),this},delay:function(e){return t.setDelay(e),this},placeholder:function(e){return t.promptPlaceholder=e,this},defaultValue:function(e){return t.promptValue=e,this},maxLogItems:function(e){return t.setMaxLogItems(e),this},closeLogOnClick:function(e){return t.setCloseLogOnClick(!!e),this},logPosition:function(e){return t.setLogPosition(e||""),this},setLogTemplate:function(e){return t.logTemplateMethod=e,this},clearLogs:function(){return t.setupLogContainer().innerHTML="",this},version:t.version}}var e=500,n=function(t){if(t){var n=function(){t&&t.parentNode&&t.parentNode.removeChild(t)};t.classList.remove("show"),t.classList.add("hide"),t.addEventListener("transitionend",n),setTimeout(n,e)}};if("undefined"!=typeof module&&module&&module.exports){module.exports=function(){return new t};var o=new t;for(var s in o)module.exports[s]=o[s]}else"function"==typeof define&&define.amd?define(function(){return new t}):window.alertify=new t}();alertify._$$alertify=$.extend(alertify._$$alertify,{delay:3000,cancelLabel:METLANG.cancel||'取消',okLabel:METLANG.confirm||'确定',logContainerClass:"alertify-logs right",confirmTitle:METLANG.delete_information||'您确定要删除该信息吗？删除之后无法再恢复。'});$(document).on('click','[data-plugin="alertify"]',function(event){event.preventDefault();alertify._$$alertify=$.extend(alertify._$$alertify,{delay:3000,cancelLabel:METLANG.cancel||'取消',okLabel:METLANG.confirm||'确定',logContainerClass:"alertify-logs right",confirmTitle:METLANG.delete_information||'您确定要删除该信息吗？删除之后无法再恢复。'});var $self=$(this),options=$(this).data();alertify._$$alertify=$.extend(alertify._$$alertify,options);options.logContainerClass=options.logContainerClass||($.inArray(options.type,['log','success','error'])>=0?'alertify-logs center':alertify._$$alertify.logContainerClass);alertify.logPosition(options.logContainerClass);switch(options.type){case"confirm":setTimeout(function(){typeof $self.attr('data-head_title')!='undefined' && alertify.addHead($self.data('head_title'),$self.data('head_icon'));($self.parents('form:eq(0)').length?$self.parents('form:eq(0)').attr('data-submited'):1)&&alertify.okBtn(alertify._$$alertify.okLabel).cancelBtn(alertify._$$alertify.cancelLabel).confirm(alertify._$$alertify.confirmTitle,function(){if(alertify._$$alertify.successMessage){alertify.success(alertify._$$alertify.successMessage)}else{if($self[0].tagName=='A'&&$self.attr('href')&&$self.attr('href').indexOf('javascript')!=0){location.href=$self.attr("href")}else{if(typeof $self.attr('table-delete')!='undefined'&&$self.data('url')){$self.metFormAjaxDel()}else{$self.parents("form").submit();if(typeof validate[$self.parents("form").attr('data-validate_order')].ajax_submit=='undefined')$self.parents("form").data('formValidation').defaultSubmit()}}}},function(){if(alertify._$$alertify.errorMessage)alertify.error(alertify._$$alertify.errorMessage)})},0);break;case"prompt":alertify.prompt(alertify._$$alertify.promptTitle,function(str,ev){var message=alertify._$$alertify.successMessage.replace("%s",str);alertify.success(message)},function(ev){alertify.error(alertify._$$alertify.errorMessage)});break;case"log":alertify.log(alertify._$$alertify.logMessage);break;case"success":alertify.success(alertify._$$alertify.successMessage);break;case"error":alertify.error(alertify._$$alertify.errorMessage);break;default:alertify.alert(alertify._$$alertify.alertMessage)}});$(document).on('click','.alertify-logs .success .close,.alertify-logs .error .close',function(event){$(this).parent().remove();$('.alertify-bg').fadeOut(100)});alertify.addHead=(head_title,head_icon,type)=>{if(type=='tips') head_title=M.synchronous=='cn'?'提示':'Tips',head_icon='fa-info-circle',alertify._$$alertify.hidenav=1;alertify._$$alertify.head_title=head_title||(M.synchronous=='cn'?'确认删除':'Confirm delete');alertify._$$alertify.head_icon=head_icon||'fa-trash-o';};