(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"255":function(e,t,a){"use strict";var d=a(2),n=a(233),o=a(3),m=a(47),r=a(279),l=a(331),s=a(329),f=a(246),i=a(71),b=a(228),c=a(50),p=a(227),u=a(234),v=a(72),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a=function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e};function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(ParaManage,o["a"].Component),a(ParaManage,[{"key":"componentDidMount","value":function componentDidMount(){this.optionadd=0,this.state.current&&this.fetch()}},{"key":"render","value":function render(){var e=this,t=this.props.parameter.all,a=this.state,n=a.active,a=a.current;return this.props.toogleParameter(this.state.current,function(){return e.setState({"current":"list"})}),d["j"].createElement(m["a"],{"className":"met-paramanage page-top-p"},d["j"].createElement(s["a"],null),"list"===a&&this.renderList(t),"detail"===a&&this.renderDetail(n))}}]);o=ParaManage;function ParaManage(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ParaManage);var u=function _possibleConstructorReturn(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(ParaManage.__proto__||Object.getPrototypeOf(ParaManage)).call(this,e));return u.fetch=function(){var e=u.$router.params.module,t=u.$router.params.class1,a=u.$router.params.class2,n=u.$router.params.class3,e="&module="+Object(v["l"])(e)+"&class1="+t+"&class2="+(a||"")+"&class3="+(n||"");u.props.dispatch({"type":"parameter/GetAllParameter","payload":{"url":e,"length":1e3}}),u.props.dispatch({"type":"parameter/GetAddParameter","payload":{"url":e}})},u.openModal=function(e,t){var a=u.props.global.$word,n=u.props.parameter,o=n.add,n=(n.all,u.state),r=n.active,l=n.form,s=(u.$router.params.module,void 0),i=void 0,c=void 0;switch(e){case"Add":o.no_order="0";var p=Object(f["a"])(o,a,u),s=a.parmanage,i=d["j"].createElement(b["a"],{"data":p,"form":u.state.addForm}),c=function onConfirm(){u.save("new")};break;case"AddOption":s=a.add,i=d["j"].createElement(b["a"],{"data":[{"field":"value","type":"Input","label":a.parametervalueinfo,"required":1}],"form":u.state.optionForm}),c=function onConfirm(){u.saveOption()};break;case"Delete":s=a.delete,i=d["j"].createElement(m["a"],{"className":"padding"},a.delete_information),c=u.delete;break;case"DeleteOption":s=a.delete,i=d["j"].createElement(m["a"],{"className":"padding"},a.delete_information),c=function onConfirm(){u.deleteOption(t.index)}}n={"params":void 0,"title":s,"width":"90%","visible":!0,"content":i,"onConfirm":c},$.each(u.state.active,function(e,t){void 0!==l[e+"-"+r.id]&&(r[e]=l[e+"-"+r.id])}),e=r.optionArr;r.options=[],r.optionArr=[],$.each(e,function(e,t){r.optionArr.push({"type":"Input","label":a.parametervalueinfo,"value":l[t.field],"field":t.field}),r.options.push({"order":e,"value":l[t.field],"id":t.field})}),r.options=JSON.stringify(r.options),u.setState({"active":r}),u.props.modal.openModal(n)},u.edit=function(e){u.setState({"active":e,"current":"detail"})},u.renderList=function(e){var t=u.props.global.$word,n=u.props.parameter.add.para_type;return d["j"].createElement(m["a"],null,d["j"].createElement(m["a"],{"className":"cu-list menu text-left solid-top"},0<e.length?e.map(function(t){var a="";return n&&n.map(function(e){if(t.type==e.val)return a=e.name,!1}),d["j"].createElement(m["a"],{"className":"cu-item arrow","onClick":function onClick(){u.edit(t)}},d["j"].createElement(m["a"],{"className":"content"},d["j"].createElement(r["a"],{"className":"text-grey"},t.name)),d["j"].createElement(m["a"],{"className":"actions align-center flex"},d["j"].createElement(r["a"],{"className":"cu-tag radius bg-green margin-left-xs"},a)))}):d["j"].createElement(m["a"],{"className":"cu-item justify-center"},t.no_data),d["j"].createElement(l["a"],{"className":"cu-btn bg-blue shadow raound btn-add cuIcon lg","onClick":function onClick(){u.openModal("Add")}},d["j"].createElement(r["a"],{"className":"cuIcon-add"}))),u.renderButton())},u.renderDetail=function(e){u.$router.params.module;var t=u.props.global.$word,a=u.state.active,a=Object(f["a"])(a,t,u);return d["j"].createElement(m["a"],null,d["j"].createElement(b["a"],{"data":a,"form":u.state.form}),u.renderButton())},u.renderButton=function(){var e=u.props.global.$word,t=u.state.current,t=[{"label":e["detail"===t?"cancel":"close"],"onClick":u.cancel,"bg":"detail"===t?"":"grey"},"detail"===t&&{"label":e.delete,"bg":"red","onClick":function onClick(){u.openModal("Delete")}},"detail"===t&&{"label":e.save,"bg":"blue","onClick":u.save}];return d["j"].createElement(p["a"],{"data":t,"fixed":"1"})},u.saveOption=function(){var a=u.props.global.$word,e=u.state,n=(e.current,e.active);Object(v["e"])([{"field":"value","type":"Input","label":a.parametervalueinfo,"required":1}],u.state.optionForm,function(e,t){t||(n.optionArr.push({"type":"Input","label":a.parametervalueinfo,"value":e.value,"field":"new-"+u.optionadd}),n.options=JSON.parse(n.options),n.options.push({"order":n.options.length,"id":"new-"+u.optionadd,"value":e.value}),n.options=JSON.stringify(n.options),u.forceUpdate(),u.props.modal.handleCancel(),u.optionadd++)})},u.save=function(e){var a,n,t=u.$router.params.module,o=u.props.global.$word,r=u.state,l=r.current,r=(r.active,u.props.parameter.add),s="&module="+Object(v["l"])(t),t=Object(f["a"])(r,o,u);"new"===e&&Object(v["e"])(t,u.state.addForm,function(e,t){t||(e.allid="new-0",c["c"](_({"url":s,"submit_type":"save"},e)).then(function(e){e.status&&(u.fetch(),u.props.modal.handleCancel())}))}),"detail"===l&&(a=u.state.form,n=u.state.active,a.allid=n.id,a["options-"+n.id]=[],n.options=n.options||"[]",$.each(JSON.parse(n.options),function(e,t){a["options-"+n.id].push({"order":e,"id":t.id,"value":a[t.id]})}),a["options-"+n.id]=JSON.stringify(a["options-"+n.id]),c["c"](_({"url":s,"submit_type":"save"},a)).then(function(e){e.status&&(u.setState({"current":"list"}),u.fetch())}))},u.delete=function(){var e=u.$router.params.module,t=u.state,a=t.current,t=t.active,e="&module="+Object(v["l"])(e)+"&class1="+u.$router.params.class1;"detail"===a&&((a=u.state.form).allid=t.id,a.id=t.id,c["c"](_({"url":e,"submit_type":"del"},a)).then(function(e){e.status&&(u.setState({"current":"list"}),u.fetch(),u.props.modal.handleCancel())}))},u.deleteOption=function(e){var t=u.state.active;t.optionArr.splice(e,1),t.options=JSON.parse(t.options),t.options.splice(e,1),t.options=JSON.stringify(t.options),u.forceUpdate(),u.props.modal.handleCancel()},u.cancel=function(){"detail"===u.state.current?u.setState({"current":"list","active":{}}):u.props.toogleParameter()},u.state={"active":{},"current":"list","form":{},"addForm":{},"optionForm":{}},u}o=Object(n["a"])([Object(u["a"])()],o),t["a"]=Object(i["b"])(function(e){return{"parameter":e.parameter,"global":e.global}})(o)},"335":function(e,t,a){"use strict";a.r(t);var c=a(2),n=a(233),r=a(3),p=a(47),o=a(331),l=a(240),s=(a(254),a(71)),i=a(234),u=a(228),d=a(267),m=a(72),f=a(12),b=a(227),v=a(229),_=a(255),h=a(329),y=a(76),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a=function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e};function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function get(e,t,a){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0!==n?"value"in n?n.value:void 0!==(n=n.get)?n.call(a):void 0:null!==(n=Object.getPrototypeOf(e))?get(n,t,a):void 0};(function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(ContentAdd,r["a"].Component),a(ContentAdd,[{"key":"componentDidShow","value":function componentDidShow(){this.fetch()}},{"key":"render","value":function render(){var e=this.props.global.$word,t=this.state.parameter;return c["j"].createElement(p["a"],{"className":"met-content-detail page-top-p pb-2rem"},c["j"].createElement(h["a"],null),c["j"].createElement(v["a"],{"title":t?e.article6:e.addinfo,"leftClick":t?this.toogleParameter:this.back}),c["j"].createElement(l["a"],{"scrollY":!0},t?c["j"].createElement(_["a"],{"toogleParameter":this.toogleParameter}):this.renderContent()))}},{"key":"componentDidMount","value":function componentDidMount(){j(ContentAdd.prototype.__proto__||Object.getPrototypeOf(ContentAdd.prototype),"componentDidMount",this)&&j(ContentAdd.prototype.__proto__||Object.getPrototypeOf(ContentAdd.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){j(ContentAdd.prototype.__proto__||Object.getPrototypeOf(ContentAdd.prototype),"componentDidHide",this)&&j(ContentAdd.prototype.__proto__||Object.getPrototypeOf(ContentAdd.prototype),"componentDidHide",this).call(this)}}]);a=ContentAdd;function ContentAdd(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ContentAdd);var i=function _possibleConstructorReturn(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(ContentAdd.__proto__||Object.getPrototypeOf(ContentAdd)).call(this,e));return i.config={"navigationBarTitleText":"内容"},i.fetch=function(){var e=i.$router.params.module,t=-1<i.props.content.hasList.indexOf(e),a="&module="+Object(m["l"])(e)+"&class1="+i.$router.params.class1+"&class2="+(i.$router.params.class2||"")+"&class3="+(i.$router.params.class3||"");t&&(i.props.dispatch({"type":"parameter/GetAllParameter","payload":{"url":a}}),i.props.dispatch({"type":"parameter/GetAddParameter","payload":{"url":a}}),i.props.dispatch({"type":"content/GetParameter","payload":{"type":e,"url":a}}),i.props.dispatch({"type":"content/GetColumnSeting","payload":{"class1":i.$router.params.class1,"class2":i.$router.params.class2||0,"class3":i.$router.params.class3||0}})),i.props.dispatch({"type":"content/GetAdd","payload":{"type":e,"url":a}})},i.openModal=function(){var e=i.props.global.$word,t=i.tabset_form(),t=c["j"].createElement(p["a"],null,c["j"].createElement(u["a"],{"data":t,"form":i.state.form_set})),t={"title":e.settings_tab,"width":"80%","visible":!0,"content":t,"onConfirm":i.tabset_save,"lable_ok":e.save};i.saveActive(),i.props.modal.openModal(t)},i.back=function(e){var t,a,n,o;(e=parseInt(e))?(t=e?i.state.form:i.$router.params,a=i.$router.params.module,n=e?"":i.$router.params.name,e="class1="+t.class1+(t.class2?"&class2="+t.class2:"")+(t.class3?"&class3="+t.class3:""),o=t.class1+"-"+(t.class2||0)+"-"+(t.class3||0),i.props.parameter.add.column_options.map(function(e){if(e.val==o)return n=$.trim(e.name.replace(/-/g,"")),!1}),r["a"].navigateTo({"url":"/pages/content/detail?"+e+"&module="+a+"&name="+n})):window.history.go(-1)},i.save=function(){var a=i.$router.params.module;i.$router.params.id;Object(m["e"])(i.formList,i.state.form,function(t,e){e||(t.attr.map(function(e){e&&(t[e]="1")}),f["p"](a,g({"submit_type":"save"},t)).then(function(e){e.status&&setTimeout(function(){i.back(1)},500)}))})},i.renderContent=function(){var e=i.$router.params.module,t=i.props.content,a=t.add,n=t.list,t=t.tabset,o=i.state,r=o.content,o=o.state_tab,l=i.props.global.$word,s=-1<i.props.content.hasList.indexOf(e),s=$.isEmptyObject(r)?s||"job"===e?a:n:r;return"product"==e&&(s.tabset=$.isEmptyObject(o)?t:o,s.tabset_btn=i.tabset_btn()),i.formList=s.list?Object(d["a"])(s,l,i):[],c["j"].createElement(p["a"],null,c["j"].createElement(u["a"],{"data":i.formList,"form":i.state.form})," ",i.renderButton())},i.renderButton=function(){var e=i.props.global.$word,e=[{"label":e.cancel,"onClick":i.back},{"label":e.save,"bg":"blue","onClick":i.save}];return c["j"].createElement(b["a"],{"data":e,"fixed":"1"})},i.tabset_btn=function(){var e=i.props.global.$word,t=i.props.content.add,a=i.state.content,n=$.isEmptyObject(a)?t:a;return c["j"].createElement(p["a"],null,c["j"].createElement(o["a"],{"className":"cu-btn bg-blue margin-right","onClick":function onClick(){var e=n.list.class3||n.list.class2||n.list.class1;i.saveActive(),i.props.dispatch({"type":"content/GetClassInfo","payload":{"module":3,"id":n.list.id,"from":"admin","classnow":e},"callback":function callback(){var e=i;setTimeout(function(){e.openModal("tabset")},200)}})}},e.settings_tab))},i.tabset_form=function(){var e=i.props.global.$word,t=i.props.content.classinfo;return t.tab_name=t.tab_name.split("|"),t.tab_name_default=t.tab_name_default.split("|"),[{"type":"Select","label":e.display_number,"field":"tab_num","value":t.tab_num,"rangeKey":"label","options":[{"label":e.default_values+"："+t.tab_num_default,"value":"0"},{"label":1,"value":"1"},{"label":2,"value":"2"},{"label":3,"value":"3"},{"label":4,"value":"4"},{"label":5,"value":"5"}]},{"type":"Input","label":e.tab_title1,"value":t.tab_name[0],"field":"tab_name_0","placeholder":e.default_values+"："+t.tab_name_default[0]},{"type":"Input","label":e.tab_title2,"value":t.tab_name[1]||"","field":"tab_name_1","placeholder":e.default_values+"："+t.tab_name_default[1]},{"type":"Input","label":e.tab_title3,"value":t.tab_name[2]||"","field":"tab_name_2","placeholder":e.default_values+"："+t.tab_name_default[2]},{"type":"Input","label":e.tab_title4,"value":t.tab_name[3]||"","field":"tab_name_3","placeholder":e.default_values+"："+t.tab_name_default[3]},{"type":"Input","label":e.tab_title5,"value":t.tab_name[4]||"","field":"tab_name_4","placeholder":e.default_values+"："+t.tab_name_default[4]}]},i.tabset_save=function(){i.$router.params.id;var e=i.state.form_set,t=i.props.content.add,a=i.state.content,n=$.isEmptyObject(a)?t:a,t=n.list.class3||n.list.class2||n.list.class1;f["q"](g({"id":n.list.id,"classnow":t,"submit_type":"save"},e)).then(function(e){e.status&&(i.props.dispatch({"type":"content/GetColumnSeting","payload":{"class1":n.list.class1,"class2":n.list.class2,"class3":n.list.class3},"callback":function callback(e){i.setState({"state_tab":e})}}),i.props.modal.handleCancel())})},i.saveActive=function(){var e=i.$router.params.module,t=i.props.content,a=t.add,t=t.list,n=i.state.form,o=-1<i.props.content.hasList.indexOf(e),r=o||"job"===e?a:t;!o&&"job"!==e||(n.attr.map(function(e){n[e]=1}),$.each(n,function(e,t){r.list[e]=n[e]})),i.setState({"content":r})},i.toogleParameter=function(e,t){Object(y["isString"])(e)?i.setState({"para_current":e,"setpara_current":t}):"detail"==i.state.para_current?i.state.setpara_current():(i.state.parameter||i.saveActive(),i.setState({"parameter":!i.state.parameter,"change":!0,"para_current":"list"}),i.state.parameter&&i.fetch())},i.state={"form":{},"form_set":{},"parameter":!1,"change":!1,"para_current":"list","setpara_current":{},"content":{},"state_tab":{}},i}a=Object(n["a"])([Object(i["a"])()],a),t["default"]=Object(s["b"])(function(e){return{"content":e.content,"global":e.global,"parameter":e.parameter}})(a)}}]);